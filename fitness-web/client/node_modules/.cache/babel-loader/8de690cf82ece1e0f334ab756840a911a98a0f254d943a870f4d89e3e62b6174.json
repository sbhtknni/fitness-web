{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Daniel Maman\\\\git\\\\fitness-web\\\\fitness-web\\\\client\\\\src\\\\componenets\\\\ChartTrainingGraph.jsx\",\n  _s = $RefreshSig$();\nimport React from 'react';\nimport { Chart } from 'chart.js';\nimport 'chartjs-plugin-datalabels';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst ChartTrainigGraph = _ref => {\n  _s();\n  let {\n    selectedTrainings\n  } = _ref;\n  const chartRef = React.useRef(null);\n  const trainingNames = [...new Set(selectedTrainings.map(training => training.name))];\n  const totalCount = selectedTrainings.length;\n  React.useEffect(() => {\n    const ctxP = chartRef.current.getContext('2d');\n    let myPieChart = null;\n    const createChart = () => {\n      const colors = generateColors(trainingNames.length);\n      myPieChart = new Chart(ctxP, {\n        type: 'pie',\n        data: {\n          labels: trainingNames.map(name => `${name} (${getPercentage(name)}%)`),\n          datasets: [{\n            data: calculateOccurrences(trainingNames, selectedTrainings),\n            backgroundColor: colors,\n            hoverBackgroundColor: colors\n          }]\n        },\n        options: {\n          responsive: true,\n          legend: {\n            position: 'right',\n            labels: {\n              padding: 20,\n              boxWidth: 10\n            }\n          },\n          plugins: {\n            datalabels: {\n              formatter: (value, ctx) => {\n                const percentage = getPercentage(ctx.chart.data.labels[ctx.dataIndex]);\n                return `${value} (${percentage}%)`;\n              },\n              color: 'white',\n              labels: {\n                title: {\n                  font: {\n                    size: '5'\n                  }\n                }\n              }\n            }\n          }\n        }\n      });\n    };\n    const destroyChart = () => {\n      if (myPieChart) {\n        myPieChart.destroy();\n        myPieChart = null;\n      }\n    };\n    destroyChart(); // Destroy any existing chart instance\n    createChart(); // Create the new chart\n\n    return () => {\n      destroyChart(); // Clean up the chart on unmount\n    };\n  }, [selectedTrainings]); // Include selectedTrainings in the dependency array to update the chart when it changes\n\n  const calculateOccurrences = (trainingNames, selectedTrainings) => {\n    const occurrences = trainingNames.map(name => selectedTrainings.filter(training => training.name === name).length);\n    return occurrences;\n  };\n  const generateColors = count => {\n    const colors = [];\n    for (let i = 0; i < count; i++) {\n      const hue = i * 360 / count;\n      const color = `hsl(${hue}, 50%, 60%)`;\n      colors.push(color);\n    }\n    return colors;\n  };\n  const getPercentage = name => {\n    const count = selectedTrainings.filter(training => training.name === name).length;\n    const percentage = (count / totalCount * 100).toFixed(2);\n    return percentage;\n  };\n  return /*#__PURE__*/_jsxDEV(\"canvas\", {\n    id: \"labelChart\",\n    ref: chartRef\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 10\n  }, this);\n};\n_s(ChartTrainigGraph, \"X+1SfQQ6xefXNU27aQW843M7cTw=\");\n_c = ChartTrainigGraph;\nexport default ChartTrainigGraph;\nvar _c;\n$RefreshReg$(_c, \"ChartTrainigGraph\");","map":{"version":3,"names":["React","Chart","jsxDEV","_jsxDEV","ChartTrainigGraph","_ref","_s","selectedTrainings","chartRef","useRef","trainingNames","Set","map","training","name","totalCount","length","useEffect","ctxP","current","getContext","myPieChart","createChart","colors","generateColors","type","data","labels","getPercentage","datasets","calculateOccurrences","backgroundColor","hoverBackgroundColor","options","responsive","legend","position","padding","boxWidth","plugins","datalabels","formatter","value","ctx","percentage","chart","dataIndex","color","title","font","size","destroyChart","destroy","occurrences","filter","count","i","hue","push","toFixed","id","ref","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["C:/Users/Daniel Maman/git/fitness-web/fitness-web/client/src/componenets/ChartTrainingGraph.jsx"],"sourcesContent":["import React from 'react';\r\nimport { Chart } from 'chart.js';\r\nimport 'chartjs-plugin-datalabels';\r\n\r\nconst ChartTrainigGraph = ({ selectedTrainings }) => {\r\n  const chartRef = React.useRef(null);\r\n  const trainingNames = [...new Set(selectedTrainings.map((training) => training.name))];\r\n  const totalCount = selectedTrainings.length;\r\n\r\n  React.useEffect(() => {\r\n    const ctxP = chartRef.current.getContext('2d');\r\n    let myPieChart = null;\r\n\r\n    const createChart = () => {\r\n      const colors = generateColors(trainingNames.length);\r\n\r\n      myPieChart = new Chart(ctxP, {\r\n        type: 'pie',\r\n        data: {\r\n          labels: trainingNames.map((name) => `${name} (${getPercentage(name)}%)`),\r\n          datasets: [\r\n            {\r\n              data: calculateOccurrences(trainingNames, selectedTrainings),\r\n              backgroundColor: colors,\r\n              hoverBackgroundColor: colors,\r\n            },\r\n          ],\r\n        },\r\n        options: {\r\n          responsive: true,\r\n          legend: {\r\n            position: 'right',\r\n            labels: {\r\n              padding: 20,\r\n              boxWidth: 10,\r\n            },\r\n          },\r\n          plugins: {\r\n            datalabels: {\r\n              formatter: (value, ctx) => {\r\n                const percentage = getPercentage(ctx.chart.data.labels[ctx.dataIndex]);\r\n                return `${value} (${percentage}%)`;\r\n              },\r\n              color: 'white',\r\n              labels: {\r\n                title: {\r\n                  font: {\r\n                    size: '5',\r\n                  },\r\n                },\r\n              },\r\n            },\r\n          },\r\n        },\r\n      });\r\n    };\r\n\r\n    const destroyChart = () => {\r\n      if (myPieChart) {\r\n        myPieChart.destroy();\r\n        myPieChart = null;\r\n      }\r\n    };\r\n\r\n    destroyChart(); // Destroy any existing chart instance\r\n    createChart(); // Create the new chart\r\n\r\n    return () => {\r\n      destroyChart(); // Clean up the chart on unmount\r\n    };\r\n  }, [selectedTrainings]); // Include selectedTrainings in the dependency array to update the chart when it changes\r\n\r\n  const calculateOccurrences = (trainingNames, selectedTrainings) => {\r\n    const occurrences = trainingNames.map((name) =>\r\n      selectedTrainings.filter((training) => training.name === name).length\r\n    );\r\n    return occurrences;\r\n  };\r\n\r\n  const generateColors = (count) => {\r\n    const colors = [];\r\n    for (let i = 0; i < count; i++) {\r\n      const hue = (i * 360) / count;\r\n      const color = `hsl(${hue}, 50%, 60%)`;\r\n      colors.push(color);\r\n    }\r\n    return colors;\r\n  };\r\n\r\n  const getPercentage = (name) => {\r\n    const count = selectedTrainings.filter((training) => training.name === name).length;\r\n    const percentage = ((count / totalCount) * 100).toFixed(2);\r\n    return percentage;\r\n  };\r\n\r\n  return <canvas id=\"labelChart\" ref={chartRef}></canvas>;\r\n};\r\n\r\nexport default ChartTrainigGraph;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}